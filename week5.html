<!DOCTYPE html>
<html>
  <head>
    <title>Week 5</title>
    <link href="styles.css" rel="stylesheet">
  </head>
  <body>
    <h1>Victor's Learning Journal at LBCC PHP/MySQL</h1>
    <nav>
        <a href="index.html">Table of Contents</a>&nbsp;|&nbsp;
        <a href="week4.html">Go to Week 4</a>
    </nav>
    <main>
      

      <article>
        <h3>Week 5</h3>
        <p>
          <time datetime="2021-10-01">October 1 2021</time>
        </p>
        <p>
          This week I reviewed sticky forms which allows the user to not need
          to retype or reenter form input in case the form is incomplete
          and needs additional information. The fields that the user has already
          entered are maintained while a message is displayed to the user informing
          them that other fields still need to be completed.
        </p>
        <p>
          Oftentimes, these forms are submitted back to itself using the its 
          same name as the action. Here, the action is set to "form.php":
          
        </p>
        <blockquote><pre>
            &lt;form action="form.php" method="POST&gt;
        </pre></blockquote>
        <p>
          For this to work, the form.php needs to check whether the user has input
          information yet. This is done by checking whether the server request method
          is POST or not:
          
        </p>
        <blockquote><pre>
            if ($_SERVER["REQUEST_METHOD"] == "POST") {
               $problem = false;
               
               if (empty($_POST['first_name'])) {
                  echo "&lt;p&gt;Please enter in first name&lt;/p&gt;";
               }
            
              if (!$problem) {
                  echo "&lt;p&gt;Great! Thank you for submitting the information.&lt;/p&gt;";
                  $_POST = []         // clear the POST variables
              }
            }
        </pre></blockquote>
        <p>
          A thank you message is displayed when the form is completed and the
          POST variables above are also then cleared. 
        </p>
        <p>
          In order to make the form sticky, the following code needs to be inserted
          into value attribute in the input tag of the form for first name:
        </p>
        <blockquote><pre>
            &lt;?php
                if (isset($_POST['first_name'])) {
                echo htmlspecialchars($_POST['first_name']);
                }
            ?&gt;
        </pre></blockquote>
        <p>
            For textareas, the php needs to echo directly into the space between
          the opening and closing textarea tags. 
          
          
        </p>  
        <blockquote><pre>
            &lt;textarea name="comments"&gt;&lt;?php
                if (isset($_POST['comments'])) {
                  echo htmlspecialchars($_POST['comments']);
                }
          
            ?&gt;&lt;/textarea&gt;
          
        </pre></blockquote>
        <p>
          Meanwhile, for select drop down menus, the php needs to echo "selected" into the opening
          option tag if the $_POST['day'] isset() and if that value equals the variable $i in the
          for loop.
        </p>
       
        <blockquote><pre>
            &lt;select name="day"&gt;
            &lt;?php
                for($i = 1; $i <= 30; $i++) {
                    echo "&lt;option value='$i'"; 
          
                    if (isset($_POST['day']) && $_POST['day'] == $i) {
                      echo " selected";
                    }
          
                    echo "&gt;$i&lt;/option&gt;";
                }
            ?&gt;
            &lt;/select&gt;
         </pre></blockquote>
         
          
          <p>
            For input of type radio and checkbox, the php needs to echo "checked" into the input tag. 
            This is similar to input of type text except for in type text, the php echos into the value
            attribute using echo htmlspecialchars($_POST['last_name']).
          </p>
          
          
          <p class="supplemental">
           Supplemental Learning
          </p>
          <p>
           It was very interesting looking through the functions section of the PHP Manual and learning by
            reading it and also trying out some code in Replit. One thing I got mistaken at first was 
            adding a $ in front of the function name. Function names do not need a $. In this example,
            I thought it was useful how echo can string together multiple values with a comma:
            
          </p>
          <blockquote><pre>
                  $myArray = [1,2,3,4,5];

                  function add($array) {
                  echo "adding last two elements: ", $array[count($array)-2] + $array[count($array) -1];
                  }

                  add($myArray);        //  echos the value "adding last two elements: 9"
          </pre></blockquote>
          <p>
            If you have default values to parameters to a function, it's best to put 
            them last in the parameter list.
            
          </p>
         
          <blockquote><pre>
                function bakeCookie($firstCookie, $secondCookie, $thirdCookie="chocolate chip") {
                    echo "\nBaking $firstCookie, $secondCookie, and $thirdCookie cookies today!";
                }

                bakeCookie("butter", "Sugar", "peanut butter");     // Baking butter, Sugar, and peanut butter cookies today!
                bakeCookie("butter", "sugar");                      // Baking butter, sugar, and chocolate chip cookies today!
          </pre></blockquote>
          <p>
            The manual also mentioned passing by reference values to a function by using an ampersand &.
            Typically, when a variable is passed to a function, once the function is done, the variable
            returns back to its original value. When an ampersand is used, the variable value may be changed
            by the function and that that change persists after the function. PHP calls this passing 
            a value by reference. Here, the bank account starts with 1000. When it is passed to the function
            annualAccountFee, the & causes the bankAccount to be passed as reference, and the bankAccount
            variable is decreased by 10 to 990:
          </p>
          <blockquote><pre>
                function annualAccountFee (&$account) {
                  $account = $account - 10;

                }

                $bankAccount = 1000;
                annualAccountFee($bankAccount);
                echo $bankAccount;                // 990
          
          </pre></blockquote>
          
          <p>
             I was thinking array_product() would have the same behavior as array_sum(), and it does
          with one major difference. If there is a non-numeric string in the array, then the product
          will be zero. Once the non-numeric strings are removed from the the array, then the product
          works as expected:
          </p>
          <blockquote><pre>
                $mixed = ["5", 2, "10", 3.3, <strong>"tree"</strong>];
                $product = array_product($mixed);
                echo $product;                    // 0

                $mixed = ["5", 2, "10", 3.3];
                $product = array_product($mixed);
                echo $product;                    // 330
           </pre></blockquote>
           <p>
             Another interesting array method is array_map(). With array_map(), you can pass it
             a callback function which is applied to every element of the array. The first 
             parameter of array_map() is the name of the function in parenthesis. Also, I realized
             that you need to have a <em>return statement</em> in the function-- otherwise the array will
             have keys but no values. 
          </p>
          <blockquote><pre>
                  function cheese($ingredient) {
                    return $ingredient = $ingredient . " cheese";         // needs return statement
                  }

                  $names = ["mozzarella", "swiss", "cheddar", "gouda", "kraft"];

                  $returnArray = array_map("cheese", $names);             // function name as first parameter
                  print_r($returnArray); 
                  
                  // Array ( [0] => mozzarella cheese [1] => swiss cheese [2] => cheddar cheese [3] => gouda cheese [4] => kraft cheese )
          </pre></blockquote>
          <p>
            The number of array methods in PHP is really impressive. Even with just the array_map(), there
            are many different uses. One way to use it is to combine many different array into one 
            multidimensional array by setting the first argument to null.
          </p>
          <blockquote><pre>
                $city = ['San Francisco', 'Portland', 'Seattle', 'Las Vegas'];
                $abbreviation = ['CA', 'OR', 'WA', 'NV'];
                $state = ['California', 'Oregon', 'Washington', 'Nevada'];
                $zip = ['94106', '97035', '98101', '88901'];

                $combined = array_map(null, $city, $state, $zip, $abbreviation);

                print_r($combined);
                // Array (  [0] => Array ( [0] => San Francisco [1] => California [2] => 94106 [3] => CA ) 
                            [1] => Array ( [0] => Portland [1] => Oregon [2] => 97035 [3] => OR ) 
                            [2] => Array ( [0] => Seattle [1] => Washington [2] => 98101 [3] => WA ) 
                            [3] => Array ( [0] => Las Vegas [1] => Nevada [2] => 88901 [3] => NV ) 
                         )


                print_r($combined[0]);
                // Array ( [0] => San Francisco [1] => California [2] => 94106 [3] => CA )
          </pre></blockquote>
          <p>
            The combined array has keys that are associated with values of each city. If we
            just print_r one of the key-value pairs by using print_r($combined[0]), then
            we get the value of the first element which is an Array with key-value pairs of San
            Francisco.
          </p>
          
          
          
      </article>
    </main>
    <hr>
    <footer>
      Last updated 9/24/2021        
    </footer>
  </body>
</html>
